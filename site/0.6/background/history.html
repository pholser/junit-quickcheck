<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7 at March 11, 2016 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160311" />
    <meta http-equiv="Content-Language" content="en" />
    <title>junit-quickcheck &#x2013; History/Background</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>junit-quickcheck</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="projectVersion">Version: 0.6
                    </li>
              
              
                  <li id="publishDate" class="pull-right">Last Published: March 11, 2016</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">junit-quickcheck</li>
                              
      <li>
  
                          <a href="../index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="../download.html" title="Download">
          <span class="none"></span>
        Download</a>
            </li>
                
      <li>
  
                          <a href="../javadoc.html" title="Javadoc">
          <span class="none"></span>
        Javadoc</a>
            </li>
                
      <li>
  
                          <a href="../discuss.html" title="Discuss">
          <span class="none"></span>
        Discuss</a>
            </li>
                
      <li>
  
                          <a href="../license.html" title="License">
          <span class="none"></span>
        License</a>
            </li>
                              <li class="nav-header">Use</li>
                              
      <li>
  
                          <a href="../usage/getting-started.html" title="Getting Started">
          <span class="none"></span>
        Getting Started</a>
            </li>
                
      <li>
  
                          <a href="../usage/basic-types.html" title="Basic Types">
          <span class="none"></span>
        Basic Types</a>
            </li>
                
      <li>
  
                          <a href="../usage/other-types.html" title="Generating Values of Other Types">
          <span class="none"></span>
        Generating Values of Other Types</a>
            </li>
                
      <li>
  
                          <a href="../usage/configuring.html" title="Configuring Generators">
          <span class="none"></span>
        Configuring Generators</a>
            </li>
                
      <li>
  
                          <a href="../usage/constraining.html" title="Constraining Generated Values">
          <span class="none"></span>
        Constraining Generated Values</a>
            </li>
                
      <li>
  
                          <a href="../usage/sample-size.html" title="Sample Size">
          <span class="none"></span>
        Sample Size</a>
            </li>
                
      <li>
  
                          <a href="../usage/seed.html" title="Seed">
          <span class="none"></span>
        Seed</a>
            </li>
                
      <li>
  
                          <a href="../usage/shrinking.html" title="Shrinking">
          <span class="none"></span>
        Shrinking</a>
            </li>
                              <li class="nav-header">Background</li>
                              
      <li class="active">
  
            <a href="#"><span class="none"></span>History</a>
          </li>
                
      <li>
  
                          <a href="../background/migrating.html" title="Migrating from Theories">
          <span class="none"></span>
        Migrating from Theories</a>
            </li>
                
      <li>
  
                          <a href="../background/similar-projects.html" title="Similar Projects">
          <span class="none"></span>
        Similar Projects</a>
            </li>
                              <li class="nav-header">Miscellaneous</li>
                              
      <li>
  
                          <a href="../source-repository.html" title="Source Repository">
          <span class="none"></span>
        Source Repository</a>
            </li>
                
      <li>
  
                          <a href="../issue-tracking.html" title="Issue Tracking">
          <span class="none"></span>
        Issue Tracking</a>
            </li>
                
      <li>
  
                          <a href="../team-list.html" title="Team">
          <span class="none"></span>
        Team</a>
            </li>
                
      <li>
  
                          <a href="../dependency-management.html" title="Dependency Management">
          <span class="none"></span>
        Dependency Management</a>
            </li>
                
      <li>
  
                          <a href="../distribution-management.html" title="Distribution Management">
          <span class="none"></span>
        Distribution Management</a>
            </li>
                
      <li>
  
                          <a href="../plugin-management.html" title="Plugin Management">
          <span class="none"></span>
        Plugin Management</a>
            </li>
                
      <li>
  
                          <a href="../plugins.html" title="Plugins">
          <span class="none"></span>
        Plugins</a>
            </li>
                              <li class="nav-header">Reports</li>
                              
      <li>
  
                          <a href="../reports/reports-core.html" title="junit-quickcheck-core">
          <span class="none"></span>
        junit-quickcheck-core</a>
            </li>
                
      <li>
  
                          <a href="../reports/reports-generators.html" title="junit-quickcheck-generators">
          <span class="none"></span>
        junit-quickcheck-generators</a>
            </li>
                
      <li>
  
                          <a href="../reports/reports-guava.html" title="junit-quickcheck-guava">
          <span class="none"></span>
        junit-quickcheck-guava</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>History/Background</h1>
<p>The <a class="externalLink" href="http://haskell.org">Haskell</a> library <a class="externalLink" href="http://www.cse.chalmers.se/~rjmh/QuickCheck/manual.html">QuickCheck</a> allows programmers to specify properties of a function that should hold true for some large (potentially infinite) set of possible arguments to the function, then executes the function using lots of random arguments to see whether the property holds up against them.</p>
<div class="section">
<h2><a name="Theories"></a>Theories</h2>
<p>One JUnit answer to function properties is the notion of <a class="externalLink" href="http://junit.org/apidocs/org/junit/experimental/theories/Theories.html">theories</a>. Programmers write parameterized tests marked as theories, run using a special test runner.</p>

<div class="source">
<div class="source"><pre class="prettyprint">    import org.junit.experimental.theories.*;
    import static org.hamcrest.Matchers.*;
    import static org.junit.Assert.*;
    import static org.junit.Assume.*;

    // Imagining the existence of classes Money and Account...
    @RunWith(Theories.class)
    public class Accounts {
        @Theory public void withdrawingReducesBalance(
            Money originalBalance,
            Money withdrawalAmount) {

            assumeThat(originalBalance, greaterThan(Money.NONE));
            assumeThat(
                withdrawalAmount,
                allOf(greaterThan(Money.NONE), lessThan(originalBalance)));

            Account account = new Account(originalBalance);

            account.withdraw(withdrawalAmount);

            assertEquals(
                originalBalance.minus(withdrawalAmount),
                account.balance());
        }
    }
</pre></div></div></div>
<div class="section">
<h2><a name="So"></a>So?</h2>
<p>TDD/BDD builds up designs example by example. The resulting test suites give programmers confidence that their code works for the examples they thought of. Theories offer a means to express statements about code that should hold for an entire domain of inputs, not just a handful of examples, and to validate those statements against lots of randomly generated inputs.</p></div>
<div class="section">
<h2><a name="Where_junit-quickcheck_came_in"></a>Where junit-quickcheck came in</h2>
<p>junit-quickcheck began its life as a library that supplies JUnit theories with random values with which to test the validity of the theories.</p>
<p>In this original incarnation, junit-quickcheck leveraged the <tt>ParameterSupplier</tt> feature of the JUnit theories machinery, via the annotation <tt>@ForAll</tt> marking theory parameters.</p>
<p>By default, when the <tt>Theories</tt> runner executes a theory, it attempts to scrape <i>data points</i> off the theory class to feed to the theories. Data points come from static fields or methods annotated with <tt>@DataPoint</tt> (single value) or <tt>@DataPoints</tt> (array/iterable of values). The <tt>Theories</tt> runner feeds all combinations of data points of types matching a theory&#x2019;s parameters to the theory for execution.</p>
<p>Marking a theory parameter with an annotation that is itself annotated with <tt>@ParametersSuppliedBy</tt> tells the <tt>Theories</tt> runner to ask a <tt>ParameterSupplier</tt> for values for the theory parameter instead. This is how junit-quickcheck interacted with the <tt>Theories</tt> runner &#x2013; <tt>@ForAll</tt> told the runner to use junit-quickcheck&#x2019;s <tt>ParameterSupplier</tt> rather than the <tt>DataPoint</tt>-oriented one.</p></div>
<div class="section">
<h2><a name="Drawbacks_to_ParameterSupplier_approach_to_junit-quickcheck"></a>Drawbacks to <tt>ParameterSupplier</tt> approach to junit-quickcheck</h2>
<p>The <tt>Theories</tt> runner executes a theory method once for every combination of values for theory parameters. This means that for a two-parameter theory method, the <tt>Theories</tt> runner instantiates the theory class and executes the theory method 10,000 times (100 * 100).</p>

<div class="source">
<div class="source"><pre class="prettyprint">    @RunWith(Theories.class)
    public class GeographyTheories {
        @Theory public void northernHemisphere(
            @ForAll @InRange(min = &quot;-90&quot;, max = &quot;90&quot;) BigDecimal latitude,
            @ForAll @InRange(min = &quot;-180&quot;, max = &quot;180&quot;) BigDecimal longitude) {

            assumeThat(latitude, greaterThan(BigDecimal.ZERO));

            assertTrue(Earth.isInNorthernHemisphere(latitude, longitude));
        }
    }
</pre></div></div>
<p>This led to mitigation strategies such as:</p>

<ul>
  
<li>Using the <tt>sampleSize</tt> attribute of <tt>@ForAll</tt> to change the number of generated values for a given theory parameter</li>
  
<li>Collapsing the theory parameters into a class, and using a generator for the class. This approach can exert positive design pressure:</li>
</ul>

<div class="source">
<div class="source"><pre class="prettyprint">    public class Coordinate {
        // ...
    }

    public class Coordinates extends Generator&lt;Coordinate&gt; {
        // ...
    }

    @RunWith(Theories.class)
    public class GeographyTheories {
        @Theory public void northernHemisphere(
            @ForAll @From(Coordinates.class) Coordinate c) {

            assumeThat(c.latitude(), greaterThan(BigDecimal.ZERO));

            assertTrue(c.inNorthernHemisphere());
        }
    }
</pre></div></div>

<ul>
  
<li>Sometimes, there is no domain concept underlying the theory&#x2019;s parameters. In this case, you could create an artificial &#x201c;tuple&#x201d; class and use the <tt>Ctor</tt> or <tt>Fields</tt> generator to produce values:</li>
</ul>

<div class="source">
<div class="source"><pre class="prettyprint">    @RunWith(Theories.class)
    public class ThreeDimensionalSpaceTheories {
        public static class Point {
            public double x, y, z;
        }

        @Theory public void originDistance(
            @ForAll @From(Fields.class) Point p) {

            assertEquals(
                Math.sqrt(p.x * p.x + p.y * p.y + p.z * p.z),
                Space.distanceFromOrigin(p.x, p.y, p.z));
        }
    }
</pre></div></div>

<div class="source">
<div class="source"><pre class="prettyprint">    @RunWith(Theories.class)
    public class GeographyTheories {
        public static class Coordinate {
            private final BigDecimal latitude, longitude;

            public Coordinate(
                @InRange(min = &quot;-90&quot;, max = &quot;90&quot;) BigDecimal latitude,
                @InRange(min = &quot;-180&quot;, max = &quot;180&quot;) BigDecimal longitude) {

                this.latitude = latitude;
                this.longitude = longitude;
            }

            // ...
        }

        @Theory public void northernHemisphere(
            @ForAll @From(Ctor.class) Coordinate c) {

            // ...
        }
    }
</pre></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2016.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
